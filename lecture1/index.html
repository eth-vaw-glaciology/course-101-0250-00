<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/course-101-0250-00/libs/highlight/github.min.css"> <link rel=stylesheet  href="/course-101-0250-00/css/franklin.css"> <link rel=stylesheet  href="/course-101-0250-00/css/poole_hyde.css"> <link rel=stylesheet  href="/course-101-0250-00/css/custom.css"> <style> html {font-size: 17px;} .franklin-content {position: relative; padding-left: 8%; padding-right: 5%; line-height: 1.35em;} @media (min-width: 940px) { .franklin-content {width: 100%; margin-left: auto; margin-right: auto;} } @media (max-width: 768px) { .franklin-content {padding-left: 6%; padding-right: 6%;} } </style> <link rel=icon  href="/course-101-0250-00/assets/favicon.png"> <title>Lecture 1</title> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <img src="/course-101-0250-00/assets/vaw_logo.png" style="width: 180px; height: auto; display: inline"> <div style="font-weight: margin-bottom: 0.5em"><a href="/course-101-0250-00/"> Fall 2021</a> <span style="opacity: 0.7;">| <a href="http://www.vvz.ethz.ch/Vorlesungsverzeichnis/lerneinheit.view?semkez=2021W&ansicht=KATALOGDATEN&lerneinheitId=155538&lang=en"> ETHZ 101-0250-00</a></span></div> <br> <h1><a href="/course-101-0250-00/">Solving partial differential equations in parallel on GPUs</a></h1> <div style="line-height:18px; font-size: 15px; opacity: 0.85">by <a href="https://vaw.ethz.ch/en/people/person-detail.MjcwOTYw.TGlzdC8xOTYxLDE1MTczNjI1ODA=.html">Ludovic RÃ¤ss</a>, <a href="https://vaw.ethz.ch/en/personen/person-detail.html?persid=124402">Mauro Werder</a> & <a href="https://www.cscs.ch/about/staff/">Samuel Omlin</a> </div> </div> <br> <style> </style> <nav class=sidebar-nav  style="opacity: 0.9"> <a class="sidebar-nav-item " href="/course-101-0250-00/"><b>Welcome</b></a> <a class="sidebar-nav-item " href="/course-101-0250-00/logistics/">Logistics</a> <a class="sidebar-nav-item " href="/course-101-0250-00/software_install/">Software install</a> <a class="sidebar-nav-item " href="/course-101-0250-00/extras/">Extras</a> <br> <div class=course-section >Part 1 - Introduction</div> <a class="sidebar-nav-item active" href="/course-101-0250-00/lecture1/">Lecture 1</a> <a class="sidebar-nav-item " href="/course-101-0250-00/lecture2/">Lecture 2</a> <a class="sidebar-nav-item " href="/course-101-0250-00/lecture3/">Lecture 3</a> <div class=course-section >Part 2 - Solving PDEs on GPUs</div> <div class=course-section >Part 3 - Projects</div> </nav> </div> </div> <div class="content container"> <div class=franklin-content > <h1 id=lecture_1 ><a href="#lecture_1" class=header-anchor >Lecture 1</a></h1> <p><strong>Welcome to ETH&#39;s course 101-0250-00L on solving partial differential equations &#40;PDEs&#41; in parallel on graphical processing units &#40;GPUs&#41; with the Julia language.</strong></p> <blockquote> <p><strong>Course structure</strong><br />The course structure includes following 3 items, to bring in new material each course both for the &quot;physics-numerics&quot; &#40;aka physics&#41; and the &quot;code-management&quot; &#40;aka code&#41;, as well as propose exercises for those concepts:</p> <ol> <li><p>ðŸ“š Physics: equations, discretisation, implementation, solver, visualisation</p> <li><p>ðŸ’» Code: technical, Julia, GitHub</p> <li><p>ðŸš§ Exercises</p> </ol> </blockquote> <h2 id=objective ><a href="#objective" class=header-anchor >Objective</a></h2> <h3 id=intro_to_julia_jupyterhubjupyter_notebooks ><a href="#intro_to_julia_jupyterhubjupyter_notebooks" class=header-anchor >ðŸ’¡ Intro to Julia, JupyterHub/Jupyter notebooks</a></h3> <ul> <li><p>Julia basics</p> <li><p>Julia package manager/system</p> <li><p>Environments</p> <li><p>Tips and tricks: Revise, debugging</p> </ul> <h3 id=solving_simple_problems_numerically ><a href="#solving_simple_problems_numerically" class=header-anchor >ðŸ“š Solving simple problems numerically</a></h3> <ul> <li><p>Initial conditions</p> <li><p>Time loop</p> <li><p>Visualisation</p> </ul> <h3 id=code_git_and_github ><a href="#code_git_and_github" class=header-anchor >ðŸ’» Code: Git and GitHub</a></h3> <ul> <li><p>Get started on GitHub:</p> <ul> <li><p>Create an account</p> <li><p>Create a repo for the course to track your progress in the class</p> </ul> </ul> <h3 id=exercises ><a href="#exercises" class=header-anchor >ðŸš§ Exercises</a></h3> <ul> <li><p>Money in the bank &#40;update, rate of change&#41;</p> <li><p>Car travelling in 1D, 2D</p> <li><p>Volcanic bomb</p> <li><p><em>&#40;optional&#41;</em> orbital</p> </ul> <div class=warning ><div class=title >âš  Warning&#33;</div> <div class=messg >Sometimes it&#39;s useful to have a warning as it may warn you about something you should pay attention to.</div></div> <h1 id=exercise_-_lecture_1 ><a href="#exercise_-_lecture_1" class=header-anchor >Exercise - lecture 1</a></h1> <h2 id=exercise_1_-_money_in_the_bank ><a href="#exercise_1_-_money_in_the_bank" class=header-anchor >Exercise 1 - <strong>Money in the bank</strong></a></h2> <p>The goal of this exercise is to familiarise with:</p> <ul> <li><p>array initialisation</p> <li><p><code>for</code> loop</p> <li><p>indexing</p> <li><p>update rule</p> <li><p>basic visualisation</p> </ul> <p>You are managing assets from a client which has an initial wealth <code>M_init</code> of 20kCHF. Your client&#39;s business generates yearly savings <code>M_save</code> of 500CHF.</p> <pre><code class="julia hljs">M_init  = <span class=hljs-number >20000.0</span>   <span class=hljs-comment ># initial wealth</span>
M_save  = <span class=hljs-number >500.0</span>;    <span class=hljs-comment ># yearly savings</span></code></pre> <h3 id=question_1 ><a href="#question_1" class=header-anchor >Question 1</a></h3> <p>Model the wealth evolution of your client for the coming 35 years <code>tot_yrs</code>:</p> <pre><code class="julia hljs">tot_yrs = <span class=hljs-number >35</span>;       <span class=hljs-comment ># number of years</span></code></pre>
<p>To do so, we will first initialise a one dimensional array &#40;vector&#41; to store the wealth evolution of the client and check that the vector <code>M_evol1</code> has the correct <code>length</code> &#40;or size&#41;:</p>
<pre><code class="julia hljs">M_evol1 = zeros(tot_yrs)
length(M_evol1)</code></pre>
<p>We then need to initialise that vector with the initial wealth of the client:</p>
<pre><code class="julia hljs">M_evol1[<span class=hljs-number >1</span>] = M_init;</code></pre>
<p>Now we have to define the core of our simulator; predicting the wealth evolution. To do so, we will define the the wealth fo the current year <code>it</code> as the wealth from previous year <code>it-1</code> plus the amount of saving <code>M_save</code> and repeat this for <code>tot_yrs</code> &#40;taking care about the start value of the iterator&#41;:</p>
<pre><code class="julia hljs"><span class=hljs-keyword >for</span> it=<span class=hljs-number >2</span>:tot_yrs
    M_evol1[it] =  M_evol1[it-<span class=hljs-number >1</span>] + M_save
<span class=hljs-keyword >end</span></code></pre>
<p>Now, we want to print the wealth of our client after <code>tot_yrs</code></p>
<pre><code class="julia hljs">println(<span class=hljs-string >&quot;Wealth after <span class=hljs-subst >$(tot_yrs)</span> years: <span class=hljs-subst >$(M_evol1[<span class=hljs-keyword >end</span>])</span> CHF&quot;</span>)</code></pre>
<p>Perfect. However, the client is interested in a graphical evolution as he needs this to convince future investors.</p>
<pre><code class="julia hljs"><span class=hljs-keyword >using</span> Plots
plot(M_evol1 ./ <span class=hljs-number >1000</span>, linewidth=<span class=hljs-number >3</span>,
     xlabel=<span class=hljs-string >&quot;time, yrs&quot;</span>, ylabel=<span class=hljs-string >&quot;savings, kchf&quot;</span>, label=<span class=hljs-string >&quot;without interest&quot;</span>,
     framestyle=:box, legend=:topleft, foreground_color_legend = <span class=hljs-literal >nothing</span>)</code></pre>
<h3 id=question_2 ><a href="#question_2" class=header-anchor >Question 2</a></h3>
<p>The bank you are working for offers actually a yearly interest rate <code>intrst</code> of 0.6&#37; for all premium client, a category your client belongs to. Repeat the exercise from Question 1 including now the interest rate.</p>
<p>Create a new vector <code>M_evol2</code> to store the wealth evolution with interest rate and assign the initial wealth:</p>
<pre><code class="julia hljs">intrst     = <span class=hljs-number >0.006</span>     <span class=hljs-comment ># fixed interest rate</span>
M_evol2    = zeros(tot_yrs)
M_evol2[<span class=hljs-number >1</span>] = M_init;</code></pre>
<p>Then, update the prediction formula within the time loop to account for the interest rate &#40;replacing the <code>??</code>&#41;</p>
<pre><code class="julia hljs"><span class=hljs-comment ># TO DO: add correct formula !</span>
<span class=hljs-keyword >for</span> it=<span class=hljs-number >2</span>:tot_yrs
    M_evol2[it] = M_evol2[it-<span class=hljs-number >1</span>] + M_save
<span class=hljs-keyword >end</span></code></pre>
<div class=note ><div class=title >ðŸ’¡ Note</div>
<div class=messg >Each year, the total wealth is the wealth of previsou year plus the percentage proportional to the interest rate.</div></div>
<p>Report the total wealth of the client after <code>tot_yrs</code>:</p>
<pre><code class="julia hljs">println(<span class=hljs-string >&quot;Wealth after <span class=hljs-subst >$(tot_yrs)</span> years with interest rate: <span class=hljs-subst >$(M_evol2[<span class=hljs-keyword >end</span>])</span> CHF&quot;</span>)</code></pre>
<p>And display the graphical evolution on top of previous one:</p>
<pre><code class="julia hljs">plot!(M_evol2 ./ <span class=hljs-number >1000</span>, linewidth=<span class=hljs-number >3</span>, label=<span class=hljs-string >&quot;with interest&quot;</span>)</code></pre>
<p>Finally, quantify the difference in the final wealth with and without interest rate:</p>
<pre><code class="julia hljs">âˆ†evo = M_evol2[<span class=hljs-keyword >end</span>] - M_evol1[<span class=hljs-keyword >end</span>]
println(<span class=hljs-string >&quot;âˆ†evo = <span class=hljs-subst >$(round(âˆ†evo, sigdigits=<span class=hljs-number >5</span>)</span>)&quot;</span>)</code></pre>
<h3 id=question_3 ><a href="#question_3" class=header-anchor >Question 3</a></h3>
<p>Great job, your client is very happy and could use the financial prediciton you made to convince the investors to fruther support his business. Your client now wants to know the final wealth after 35 years given the fact he plans a one time expense <code>expns</code> of 1125CHF in 20 years. Provide the final wealth and a graphical evolution for both cases with and without interest rate.</p>
<h3 id=question_4 ><a href="#question_4" class=header-anchor >Question 4</a></h3>
<p>The final task you&#39;ll have to perform for your client before transferring his dossier to another department within the bank is to predict his wealth evolution taking market&#39;s randomness into account.</p>
<p>Define a yearly variable interest rate of 0.5&#37; &#43;/- 1&#37;. Report the final wealth as well as a graphical evolution of your client&#39;s wealth taking the random market evolution into account for the coming 35 years.</p>
<div class=note ><div class=title >ðŸ’¡ Note</div>
<div class=messg >You can use <code>randn&#40;&#41;</code> to generate a normally-distributed random number.</div></div>
<p>ðŸŽ‰ Good job&#33; You are done with <strong>Exercise 1</strong></p>

<div class=page-foot >
  <div class=copyright >
    <a href="https://github.com/eth-vaw-glaciology/course-101-0250-00/"><b>Edit this page on <img class=github-logo  src="https://unpkg.com/ionicons@5.1.2/dist/svg/logo-github.svg"></b></a><br>
    Last modified: September 07, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
    </div>